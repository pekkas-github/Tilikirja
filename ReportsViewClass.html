<script>

class ReportsView {

  constructor(controller) {
    this.controller = controller
  }

  render(summaryByAccount) {
  
    /* CONTROLS */ 
    let controls = '<select class="cbo" id="cbo-years" name="years">'

    app.years.forEach( (year) => {
      controls += `<option>${year.year}</option>`
    })

    controls += '</select>'
    $('.controls').html(controls)
    $('#cbo-years').val(app.currentYear)

    /* CONTENT */
    let content = `
      <table id="tbl-reports">
      <tr>
        <th>Tili</th>
        <th>Summa</th>
        <th>A-osuus</th>
        <th>B-osuus</th>
      </tr>`

    app.accounts.forEach( (account) => {
      if (summaryByAccount[account.id]) {
      content += `
      <tr id="${account.id}">
        <td>${account.name}</td>
        <td class="number"> ${summaryByAccount[account.id].tot.toFixed(2)}</td>
        <td class="number"> ${summaryByAccount[account.id].a.toFixed(2)}</td>
        <td class="number"> ${summaryByAccount[account.id].b.toFixed(2)}</td>
      </tr>`
      }
    })

    content += `
    <tr>
      <th class="total"> Yhteens√§ </th>
      <th class="total"> ${summaryByAccount.Totals.tot.toFixed(2) } </th>
      <th class="total"> ${ summaryByAccount.Totals.a.toFixed(2) } </th>
      <th class="total"> ${ summaryByAccount.Totals.b.toFixed(2) } </th>
    </tr>
    </table>`
    $('.content').html(content)

    /* EVENT LISTENERS */
    const that = this
    $('#cbo-years').on('change', () => {
      that.controller.changeYear($('#cbo-years').val())})
  }
}
</script>