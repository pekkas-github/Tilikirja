<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
  </head>
  <body>
    Integration Test Tilikirja
  <?!= TestFrame.getTestFrameScript() ?>
  <?!= BrowserLibraries.importLib('DBMS') ?>
  <?!= BrowserLibraries.importLib('ServerAccess') ?>
  <?!= app.include('Events') ?>
  <?!= app.include('EventsController') ?>
  <?!= app.include('EventsView') ?>
  <?!= app.include('EventFormView') ?>
  <?!= app.include('EventCommentView') ?>
  <?!= app.include('CommonModel') ?>
  <?!= app.include('globals') ?>


  <script>

    function startTest() {
      Db.init().then(() => {
        EventsController.openEventsPage()
//        Common.setCurrentYear(Db.getRecords('years').where('current', 'x')[0].year)
//        let event = {id:333, number:999, date:'2021-05-06', event:'Huihai', a_share:10, account_id:1, comment:'psa', fiscal_year:2021, charging:''}

      })
    }

  // Refresh remote tables
  google.script.run
  .withSuccessHandler(startTest)
  .resumeTable('events')
    
  </script>

  </body>
</html>
