<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <?!= app.include('styles') ?>
    <?!= app.include('globals') ?>
    <?!= BrowserLibraries.importLib('DBMS') ?>
    <?!= BrowserLibraries.importLib('ServerAccess') ?>
  </head>

  <body>

    <div class="grid">
    
        <div class="header"><h2>Tilikirja</h2></div>

        <div class="nav-container">
          <span class="nav-item" id="page0">Etusivu</span>
          <span class="nav-item" id="page1">Tapahtumat</span>
          <span class="nav-item" id="page2">Veden kulutus</span>
          <span class="nav-item" id="page3">Tuloslaskelmat</span>
          <span class="nav-item" id="page4">Nelj√§nnesveloitus</span>
        </div>

        <div class="controls"> </div>

        <div class="content"> </div>

        <div class="footer">
          <span class="footer-left"><?= profile ?></span>

          <span class="footer-right">versio <?= version ?></span>
        </div>              
    
    </div>
    
    <div class="modal popup">
      <div class="popup-content"></div>
    </div>
    
    <div class="modal spinner">
      <div class="spinner-roller"></div>
    </div>

    <!-- EVENT LISTENERS (FRAME) -->
    <script> 
      const profile = <?= profile ?>

      /* Event Listeners */
      $('#page0').on('click', () => {
        InfoView.render()
      })

      $('#page1').on('click', () => {
        EventsController.openEventsPage()
      })

      $('#page2').on('click', () => {
        ReadingsController.openReadingsPage()
      })

      $('#page3').on('click',() => {
        ReportsController.openReportsPage() 
      })

      $('#page4').on('click',() => {
        ChargesController.openChargesPage()
      })
      
      $('.nav-item').on('click', function() {
        $('.nav-item').css('background', '')
        $('.nav-item').css('font-weight', '')
        $(this).css('background', '#333385')
        $(this).css('font-weight', 'bold')
      })
    </script>

    <!-- APPLICATION CODE MODULES -->
    <?!= app.include('modules') ?>
    
  </body>
</html>
