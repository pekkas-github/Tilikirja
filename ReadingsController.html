<script>

  const readingsController = (function() {

    function addReading(reading) {
      readingsModel.addReading(reading)
      .catch( err => {
        alert(`Server: ${err.message}`)
        reloadReadings()
      })
      readingsView.render()
    }

    function openReadingsPage() {
      readingsView.render()
    }

    function openReadingForm() {
      readingFormView.render()
    }

    function openWaterPriceForm() {
      waterPriceFormView.render()
    }

    async function reloadReadings() {
      try {
        await readingsModel.getReadings()
        readingsView.render()
      }
      catch(error) {
        alert(`Server: ${error.message}`)
      }
    }

    return {
      addReading: addReading,
      openReadingsPage: openReadingsPage,
      openReadingForm: openReadingForm,
      openWaterPriceForm: openWaterPriceForm

    }
  })()

</script>