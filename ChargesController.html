<script>

const chargesController = (function() {

  function ackCharges(date) {
    chargesModel.ackCharges(date)
    .catch( error => {
      alert(error)
      reloadEvents()
    })
    openChargesPage()
  }

  async function reloadEvents() {
    try {
      await eventsModel.getEvents()
      openChargesPage()
    }
    catch(error) {alert(error)}
  }

  function openChargesPage() {
    const eventsToBeCharged = chargesModel.getEventsToBeCharged()
    chargesView.render(eventsToBeCharged)
  }

  return {
    ackCharges: ackCharges,
    reloadEvents: reloadEvents,
    openChargesPage: openChargesPage
  }
})()
</script> 