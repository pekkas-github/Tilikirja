<script>

class ReadingsController {

    static model = new ReadingsModel()
    static eventModel = EventsModel 

  static async addReading(reading) {
    app.spinner.on()
    await this.model.addReading(reading)
      this.openReadingsPage()
      app.spinner.off()
      app.popup.off()
  }

  static openReadingsPage() {
    const readings = this.model.getReadings(10)
    
    ReadingsView.controller = this
    ReadingsView.render(readings)
  }

  static openReadingForm() {
    const years       = EventsModel.getYears()
    const currentYear = EventsModel.getCurrentYear()
    
    ReadingFormView.controller = this
    ReadingFormView.render(years, currentYear)
  }

  static openWaterPriceForm() {
    WaterPriceFormView.render(this.model.getCurrentWaterPrice())
  }
}

</script>