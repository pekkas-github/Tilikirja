<script>
//NÄMÄ OVAT EVENTS-TAPAHTUMIA. CHARGES-MODELIA EI ERIKSEEN TARVITA
class ChargesModel {

  static ackCharges(date) {
    // Local update
    const events = this.getEventsToBeCharged()

    for (const event of events) {
      event.cleared = date
      Db.updateRecord('events', event)
    }


    Server.apiCall('ackCharges', events, date)
  }

  static getEventsToBeCharged() {
    const events = Db.getRecords('events').where('cleared', '').where('charging', 'x')
    return events.slice(0, events.length)  // Drop function defs from the array
  }
}

</script>